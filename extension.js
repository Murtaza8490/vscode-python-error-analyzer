"use strict";var z=Object.create;var p=Object.defineProperty;var w=Object.getOwnPropertyDescriptor;var P=Object.getOwnPropertyNames;var D=Object.getPrototypeOf,S=Object.prototype.hasOwnProperty;var b=(t,e)=>{for(var r in e)p(t,r,{get:e[r],enumerable:!0})},E=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of P(e))!S.call(t,o)&&o!==r&&p(t,o,{get:()=>e[o],enumerable:!(n=w(e,o))||n.enumerable});return t};var f=(t,e,r)=>(r=t!=null?z(D(t)):{},E(e||!t||!t.__esModule?p(r,"default",{value:t,enumerable:!0}):r,t)),k=t=>E(p({},"__esModule",{value:!0}),t);var N={};b(N,{activate:()=>T,deactivate:()=>I});module.exports=k(N);var i=f(require("vscode"));var a=f(require("vscode"));var C=require("child_process"),x=require("path"),l=class{analyzeCode(e){let r=[],n=(0,C.spawnSync)("python3",[`${(0,x.dirname)(__dirname)}/syntaxAnalyzer/analyzer.py`,e.getText()]);if(n.error)return console.error("Error running Python analyzer:",n.error),r;try{let o=n.stdout.toString().trim();return o?JSON.parse(o).map(s=>({line:s.line,column:s.column,message:s.message,severity:s.severity,type:s.type,suggestions:s.suggestions||[]})):r}catch(o){return console.error("Error parsing analyzer output:",o),console.error("Raw output:",n.stdout.toString()),r}}getSuggestions(e){return e.suggestions&&e.suggestions.length>0?e.suggestions:{NameError:["Define the variable before using it","Check for typos in variable name","Import required module"],SyntaxError:["Check for missing parentheses","Verify indentation","Check for missing colons"],IndentationError:["Use consistent indentation (spaces or tabs)","Check indentation level"]}[e.type||"Unknown"]||["No specific suggestions available"]}};var y=class{constructor(){this.errorAnalyzer=new l}analyzePythonCode(e,r){let n=this.errorAnalyzer.analyzeCode(e),o=[];n.forEach(c=>{let s=new a.Range(c.line-1,c.column,c.line-1,c.column+1),d=new a.Diagnostic(s,c.message,this.getSeverity(c.severity));d.source="Python Error Analyzer",o.push(d)}),r.set(e.uri,o)}getSeverity(e){switch(e){case"error":return a.DiagnosticSeverity.Error;case"warning":return a.DiagnosticSeverity.Warning;default:return a.DiagnosticSeverity.Information}}};var u=f(require("vscode"));var m=class{constructor(){this.errorAnalyzer=new l}provideCodeActions(e,r,n,o){if(o.isCancellationRequested)return[];let c=n.diagnostics,s=[];return c.forEach(d=>{if(o.isCancellationRequested)return;this.errorAnalyzer.getSuggestions({line:r.start.line+1,column:r.start.character,message:d.message,severity:"error",type:this.getErrorType(d.message)}).forEach(g=>{let v=new u.CodeAction(g,u.CodeActionKind.QuickFix),h=new u.WorkspaceEdit,A=g.includes("Import")?`import ${g.split(" ")[1]}`:this.getFixText(g,e.getText(r));h.replace(e.uri,r,A),v.edit=h,v.diagnostics=[d],v.isPreferred=!0,s.push(v)})}),s}getErrorType(e){return e.includes("NameError")?"NameError":e.includes("SyntaxError")?"SyntaxError":e.includes("IndentationError")?"IndentationError":"Unknown"}getFixText(e,r){switch(e){case"Check indentation":return r.replace(/^\s*/,"    ");case"Define the variable before using it":return`${r.trim()} = None  # TODO: Initialize this variable`;default:return r}}};function T(t){console.log("Python Error Analyzer is now active");let e=new y,r=new m,n=i.languages.createDiagnosticCollection("python-error-analyzer");t.subscriptions.push(n),t.subscriptions.push(i.workspace.onDidChangeTextDocument(o=>{o.document.languageId==="python"&&e.analyzePythonCode(o.document,n)})),t.subscriptions.push(i.languages.registerCodeActionsProvider("python",r,{providedCodeActionKinds:[i.CodeActionKind.QuickFix]})),i.window.activeTextEditor&&e.analyzePythonCode(i.window.activeTextEditor.document,n)}function I(){console.log("Python Error Analyzer is now deactivated")}0&&(module.exports={activate,deactivate});
